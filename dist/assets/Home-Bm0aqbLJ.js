import{_,c as a,F as f,r as $,o as s,a as i,b as r,w as l,d as c,e as v,t as h,T as p}from"./index-Bp0uHhJ_.js";const S={props:{msg:String},data(){return{theData:{},tempData:{},resultSet:[],tempResultSet:[],currentPage:1,total:0,imgURL:"https://media.nfsacollection.net/",query:"https://api.collection.nfsa.gov.au/search?limit=25&hasMedia=yes&year=1970-2000&query=",searchString:"women",selectedCategories:[]}},computed:{filteredItems(){return this.selectedCategories.length===0?this.resultSet:this.resultSet.filter(e=>e.forms&&this.selectedCategories.includes(e.forms[0])||e.countries&&this.selectedCategories.includes(e.countries[0])||e.parentTitle&&e.parentTitle.genres&&this.selectedCategories.includes(e.parentTitle.genres[0]))}},mounted(){this.fetchData()},methods:{fetchData(){let e=this.query+this.searchString+"&page="+this.currentPage;console.log("API call: "+e),fetch(e).then(o=>{o.json().then(n=>{this.$data.tempData={...this.$data.tempData,...n},this.$data.tempResultSet=this.$data.tempResultSet.concat(n.results),this.$data.total=n.meta.count.total,this.$data.total>0?this.currentPage*25<500&&this.currentPage*25<this.$data.total?(this.currentPage++,this.fetchData()):(this.$data.theData=this.$data.tempData,this.$data.tempData={},this.$data.resultSet=this.$data.tempResultSet,this.$data.tempResultSet=[],this.currentPage=1,console.log("Pages: "+Math.ceil(this.$data.total/25)),console.log("finished")):console.log("no results")})}).catch(o=>{console.error(o)})},clearResults(){this.$data.resultSet=[]}}},D={class:"search"},y={key:0,class:"container left"},R={class:"content"},P=["src","alt","title"],k={key:1,class:"container right"},w={class:"content"},C=["src","alt","title"];function L(e,o,n,T,u,g){const m=v("RouterLink");return s(),a("div",D,[(s(!0),a(f,null,$(g.filteredItems,(t,d)=>(s(),a("div",{class:"timeline",key:t[d]},[d%2===0?(s(),a("div",y,[i("div",R,[r(m,{to:{name:"about",params:{id:t.id}}},{default:l(()=>[i("h2",null,h(t.productionDates[0].fromYear),1),i("p",null,h(t.name),1),r(p,null,{default:l(()=>[t.preview&&t.preview[0]?(s(),a("img",{key:0,src:u.imgURL+t.preview[0].filePath,alt:t.name,title:t.name},null,8,P)):c("",!0)]),_:2},1024)]),_:2},1032,["to"])])])):c("",!0),d%2===1?(s(),a("div",k,[i("div",w,[r(m,{to:{name:"about",params:{id:t.id}}},{default:l(()=>[i("h2",null,h(t.productionDates[0].fromYear),1),i("p",null,h(t.name),1),r(p,null,{default:l(()=>[t.preview&&t.preview[0]?(s(),a("img",{key:0,src:u.imgURL+t.preview[0].filePath,alt:t.name,title:t.name},null,8,C)):c("",!0)]),_:2},1024)]),_:2},1032,["to"])])])):c("",!0)]))),128))])}const I=_(S,[["render",L],["__scopeId","data-v-66557575"]]);export{I as default};
